\section{Internal\+M\+SG Class Reference}
\label{class_internal_m_s_g}\index{Internal\+M\+SG@{Internal\+M\+SG}}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static \textbf{ compose\+Msg} (int \$command, array \$message)
\item 
static \textbf{ decompose\+Msg} (string \$msg)
\item 
static \textbf{ extract\+Msg} (string \$msg)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A messaging utility class used to unify and manage internal messaging within various server subsystems. 

\subsection{Member Function Documentation}
\mbox{\label{class_internal_m_s_g_ae3b91a7baffc1bef8eaeb4a5bcca65f0}} 
\index{Internal\+M\+SG@{Internal\+M\+SG}!compose\+Msg@{compose\+Msg}}
\index{compose\+Msg@{compose\+Msg}!Internal\+M\+SG@{Internal\+M\+SG}}
\subsubsection{compose\+Msg()}
{\footnotesize\ttfamily static compose\+Msg (\begin{DoxyParamCaption}\item[{int}]{\$command,  }\item[{array}]{\$message }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Composes an encoded message used for internal messaging within the server complex. 
\begin{DoxyParams}{Parameters}
{\em \$command} & One of the Command constants. \\
\hline
{\em \$message} & An array containing relevant data for this command. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns a formatted message string. 
\end{DoxyReturn}

\begin{DoxyCode}
17                                                                      : \textcolor{keywordtype}{string} \{
18         \textcolor{keywordflow}{if} (!Command::isCommand ($command)) \{
19             \textcolor{keywordflow}{return} Command::INVALID;
20         \}
21         \textcolor{keywordflow}{return} \textcolor{stringliteral}{"$command:"}.json\_encode ($message);
22     \}
\end{DoxyCode}
Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{class_internal_m_s_g_ae3b91a7baffc1bef8eaeb4a5bcca65f0_icgraph}
\end{center}
\end{figure}
\mbox{\label{class_internal_m_s_g_ab515acd10479df5ff64b2584a2f8fa9d}} 
\index{Internal\+M\+SG@{Internal\+M\+SG}!decompose\+Msg@{decompose\+Msg}}
\index{decompose\+Msg@{decompose\+Msg}!Internal\+M\+SG@{Internal\+M\+SG}}
\subsubsection{decompose\+Msg()}
{\footnotesize\ttfamily static decompose\+Msg (\begin{DoxyParamCaption}\item[{string}]{\$msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Decomposes an encoded message and decodes it into useable component. If the message cannot be decoded, an invalid message array is returned with Command\+::\+I\+N\+V\+A\+L\+ID in its 0 index and nothing in 1 index. 
\begin{DoxyParams}{Parameters}
{\em \$msg} & Message to decode. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns an array containing the decoded message. 0 index holds the Command -\/value and 1 index the decoded message. 
\end{DoxyReturn}

\begin{DoxyCode}
31                                                       : array \{
32         \textcolor{keywordflow}{if} (($pos = strpos ($msg, \textcolor{charliteral}{':'})) === \textcolor{keyword}{false} || ($command = DataLib::isInt (substr ($msg, 0, $pos))) 
      === \textcolor{keyword}{false} || !Command::isCommand ($command)) \{
33             \textcolor{keywordflow}{return} [ Command::INVALID ];
34         \}
35         \textcolor{keywordflow}{return} [
36             $command,
37             json\_decode (substr ($msg, $pos + 1), \textcolor{keyword}{true})
38         ];
39     \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=273pt]{class_internal_m_s_g_ab515acd10479df5ff64b2584a2f8fa9d_cgraph}
\end{center}
\end{figure}
\mbox{\label{class_internal_m_s_g_a747d0ca9fce2e083cbb6c9701fcaa795}} 
\index{Internal\+M\+SG@{Internal\+M\+SG}!extract\+Msg@{extract\+Msg}}
\index{extract\+Msg@{extract\+Msg}!Internal\+M\+SG@{Internal\+M\+SG}}
\subsubsection{extract\+Msg()}
{\footnotesize\ttfamily static extract\+Msg (\begin{DoxyParamCaption}\item[{string}]{\$msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}

Extracts and returns the message part of an internal message (Command is excluded). 
\begin{DoxyParams}{Parameters}
{\em \$msg} & A message string in internal message format. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Returns the extracted section or an empty string on failure. 
\end{DoxyReturn}

\begin{DoxyCode}
46                                                     : \textcolor{keywordtype}{string} \{
47         \textcolor{keywordflow}{if} (($pos = strpos ($msg, \textcolor{charliteral}{':'})) === \textcolor{keyword}{false} || ($command = DataLib::isInt (substr ($msg, 0, $pos))) 
      === \textcolor{keyword}{false} || !Command::isCommand ($command)) \{
48             \textcolor{keywordflow}{return} \textcolor{stringliteral}{''};
49         \}
50         \textcolor{keywordflow}{return} substr ($msg, $pos + 1);
51     \}
\end{DoxyCode}
Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=252pt]{class_internal_m_s_g_a747d0ca9fce2e083cbb6c9701fcaa795_cgraph}
\end{center}
\end{figure}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
lora/internalmsg.\+php\end{DoxyCompactItemize}
